{"mappings":"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","sources":["src/js/changeThemeLibrary.js","src/my-library.js"],"sourcesContent":["const body = document.querySelector('body');\nconst btnLightTheme = document.querySelector('.theme__btn--light');\nconst btnDarkTheme = document.querySelector('.theme__btn--dark');\nconst footer = document.querySelector('footer');\nconst modal = document.querySelector('.modal');\nconst modalFooter = document.querySelector('.footer-modal');\nconst footerModalText = document.querySelector('.footer-modal__text');\n\n\n\n\n\nbtnLightTheme.addEventListener('click', setLightTheme);\nbtnDarkTheme.addEventListener('click', setDarkTheme);\n\nlet currentTheme = '';\n\nif (localStorage.getItem('currentTheme') === 'dark') {\n   setDarkTheme();\n}\n\nfunction setLightTheme() {\n   btnDarkTheme.style.display = \"block\";\n   btnLightTheme.style.display = \"none\";\n   body.classList.remove('dark');\n   footer.classList.remove('dark');\n   modalFooter.style.backgroundColor = \"white\";\n   footerModalText.style.color = \"#545454\";\n   modal.classList.remove('dark');\n   currentTheme = localStorage.setItem('currentTheme', 'light');\n}\n\nfunction setDarkTheme() {\n   btnLightTheme.style.display = \"block\";\n   btnDarkTheme.style.display = \"none\";\n   body.classList.add('dark');\n   footer.classList.add('dark');\n   modalFooter.style.backgroundColor = \"#333\";\n   footerModalText.style.color = \"white\";\n   modal.classList.add('dark');\n   currentTheme = localStorage.setItem('currentTheme', 'dark');\n}\n","import './js/changeThemeLibrary';\n// Основний файл сторінки My library. Сюди будуть імпортуватися окремі функції з ./js/my-library\n// Додавайте ці окремі файли саме у ту папку і експортуйте сюди.\nimport './js/modal-close';\nimport './js/modal-open';\nimport './js/footer';\n\nimport { drawGallery } from './js/drawGallery';\nimport { drawPagination } from './js/drawPagination';\nimport { calcNewPgNum } from './js/calcNewPgNum';\nimport { addModalMcp } from './js/modalMarkup';\n\nconst queueBtnRef = document.querySelector('#queue');\nconst watchedBtnRef = document.querySelector('#watched');\nconst buttonsRef = document.querySelector('.header__buttons');\nconst galleryRef = document.querySelector('.gallery');\nconst paginationRef = document.querySelector('#pagination');\nconst pageNumRef = document.querySelector('#page-numbers');\nconst modalMcpContainer = document.querySelector('.modal__data--content');\n\nconst MOVIES_PER_PAGE = 20;\nconst LOCAL_MOVIES_KEY = 'localMovies';\n//\nconst STORAGE_KEYS = {\n  watched: 'watchedAll',\n  queue: 'queueAll',\n};\n//\nconst LOCAL_MOVIES_RULES = {\n  watched: 'watched',\n  queue: 'queue',\n};\n//\n\n/* Rendering Initial Values*/\nreDrawLocalMovies(LOCAL_MOVIES_RULES.watched, 1);\n\n/*\n * ===================\n */\n\n/* MAIN Content Rendering Function */\nfunction reDrawLocalMovies(rules, pgNum) {\n  // Get movies Full List from needed Local Storage\n  const movies = JSON.parse(localStorage.getItem(STORAGE_KEYS[rules]));\n\n  if (movies) {\n    const localMovies = {\n      page: pgNum,\n      total_pages: movies.total_pages,\n      total_results: movies.total_results,\n      results: movies.results.slice(\n        MOVIES_PER_PAGE * (pgNum - 1),\n        MOVIES_PER_PAGE * pgNum\n      ),\n      rules,\n    };\n\n    localStorage.setItem(LOCAL_MOVIES_KEY, JSON.stringify(localMovies));\n\n    drawGallery(galleryRef, localMovies.results);\n    drawPagination(pageNumRef, pgNum, localMovies.total_pages);\n\n    paginationRef.addEventListener('click', onPgNumClk);\n    galleryRef.addEventListener('click', onGalleryClk);\n  } else {\n    drawEmptyGallery();\n  }\n\n  window.scrollTo(0, 0);\n  buttonsRef.addEventListener('click', onBtnClk);\n}\n\nfunction drawEmptyGallery() {\n  galleryRef.innerHTML = '<h1>EMPTY gallery</h1>';\n  pageNumRef.innerHTML = '';\n}\n\nfunction onBtnClk(e) {\n  buttonsRef.removeEventListener('click', onBtnClk);\n\n  if (e.target.id === 'watched') {\n    watchedBtnRef.classList.add('btn--is-active');\n    queueBtnRef.classList.remove('btn--is-active');\n\n    reDrawLocalMovies(LOCAL_MOVIES_RULES.watched, 1);\n  } else {\n    watchedBtnRef.classList.remove('btn--is-active');\n    queueBtnRef.classList.add('btn--is-active');\n\n    reDrawLocalMovies(LOCAL_MOVIES_RULES.queue, 1);\n  }\n}\n\nfunction onGalleryClk(e) {\n  if (e.target.closest('.card')) {\n    const movieNumberEl = e.target.closest('.card');\n    // console.log(e.target);\n    // console.log(movieNumberEl);\n    console.log(\n      `%c${movieNumberEl.dataset.movie}`,\n      'color: yellow; background-color: red; display: inline-block; padding: 5px; font-weight: bold;'\n    );\n\n    const movie = JSON.parse(localStorage.getItem(LOCAL_MOVIES_KEY)).results[\n      movieNumberEl.dataset.movie\n    ];\n    modalMcpContainer.insertAdjacentHTML('afterbegin', addModalMcp(movie));\n\n    const btnToWatched = document.querySelector('#addToWatched');\n    const btnToQueue = document.querySelector('#addToQueue');\n    btnStyle('watched', movie, movie.id, btnToWatched);\n    btnStyle('queue', movie, movie.id, btnToQueue);\n\n    btnToWatched.addEventListener('click', () => {\n      addMovieToStorage('watched', movie, movie.id, btnToWatched);\n    });\n    btnToQueue.addEventListener('click', () => {\n      addMovieToStorage('queue', movie, movie.id, btnToQueue);\n    });\n  }\n}\n\nfunction onPgNumClk(e) {\n  if (!e.target.closest('[data-page]')) {\n    return;\n  }\n\n  pageNumRef.removeEventListener('click', onPgNumClk);\n\n  const targetPageNum = e.target.closest('[data-page]').dataset.page;\n\n  // if (!targetPageNum) {\n  //     return;\n  // }\n\n  const localMovies = JSON.parse(localStorage.getItem(LOCAL_MOVIES_KEY));\n\n  const currentPageNum = localMovies.page;\n  const totalPages = localMovies.total_pages;\n\n  const newPageNum = calcNewPgNum(currentPageNum, targetPageNum, totalPages);\n\n  reDrawLocalMovies(localMovies.rules, newPageNum);\n}\nfunction addMovieToStorage(storageKey, movie, movieId, btn) {\n  console.log(\n    'addMovieToStorage started... storageKey: ',\n    storageKey,\n    'movie: ',\n    movie\n  );\n  console.log('STORAGE_KEYS[storageKey]: ', STORAGE_KEYS[storageKey]);\n\n  if (!isMovieInStorage(storageKey, movie.id)) {\n    let storageMovies = JSON.parse(\n      localStorage.getItem(STORAGE_KEYS[storageKey])\n    );\n    if (!storageMovies) {\n      storageMovies = {\n        results: [],\n        total_results: 0,\n        total_pages: 0,\n      };\n    }\n\n    storageMovies.results.push(movie);\n    storageMovies.total_results += 1;\n    storageMovies.total_pages = Math.ceil(\n      storageMovies.total_results / MOVIES_PER_PAGE\n    );\n\n    localStorage.setItem(\n      STORAGE_KEYS[storageKey],\n      JSON.stringify(storageMovies)\n    );\n    btn.classList.add('btn__standart--orange');\n    btn.textContent = `delete from ${storageKey}`;\n  } else {\n    let storageMovies = JSON.parse(\n      localStorage.getItem(STORAGE_KEYS[storageKey])\n    );\n    let storageMovie = storageMovies.results.find(\n      movieLS => movieLS.id === movieId\n    );\n    let movieIndex = storageMovies.results.indexOf(storageMovie);\n    storageMovies.results.splice(movieIndex, 1);\n    localStorage.setItem(\n      STORAGE_KEYS[storageKey],\n      JSON.stringify(storageMovies)\n    );\n    btn.classList.remove('btn__standart--orange');\n    btn.textContent = `add to ${storageKey}`;\n  }\n}\n\nfunction isMovieInStorage(storageKey, movieId) {\n  const storageMovies = JSON.parse(\n    localStorage.getItem(STORAGE_KEYS[storageKey])\n  );\n  if (!storageMovies) return false;\n\n  return storageMovies.results.find(movie => movie.id === movieId)\n    ? true\n    : false;\n}\n\nfunction btnStyle(storageKey, movie, movieId, btn) {\n  if (isMovieInStorage(storageKey, movie.id)) {\n    console.log('фильм добавлен в ls');\n    btn.classList.add('btn__standart--orange');\n    btn.textContent = `delete from ${storageKey}`;\n  } else {\n    console.log('фильм не добавлен в LS');\n  }\n}\n\n// GET TRENDING\n// const MEDIA_TYPE = 'movie';\n// const TIME_WINDOW = 'day'; // day | week\n// https://api.themoviedb.org/3/trending/{MEDIA_TYPE}/{TIME_WINDOW}?api_key=<<api_key>>\n//\n\n// GET SEARCH QUERY\n//\n// https://api.themoviedb.org/3/search/movie?api_key=b282a22ae665f5f17a32a077013d243c&query=cat&page=1&include_adult=false\n"],"names":["$894867cefe47d7b4$var$body","document","querySelector","$894867cefe47d7b4$var$btnLightTheme","$894867cefe47d7b4$var$btnDarkTheme","$894867cefe47d7b4$var$footer","$894867cefe47d7b4$var$modal","$894867cefe47d7b4$var$modalFooter","$894867cefe47d7b4$var$footerModalText","addEventListener","style","display","classList","remove","backgroundColor","color","$894867cefe47d7b4$var$currentTheme","localStorage","setItem","$894867cefe47d7b4$var$setDarkTheme","add","getItem","$865c390aa2d1ad34$var$queueBtnRef","$865c390aa2d1ad34$var$watchedBtnRef","$865c390aa2d1ad34$var$buttonsRef","$865c390aa2d1ad34$var$galleryRef","$865c390aa2d1ad34$var$paginationRef","$865c390aa2d1ad34$var$pageNumRef","$865c390aa2d1ad34$var$modalMcpContainer","$865c390aa2d1ad34$var$LOCAL_MOVIES_KEY","$865c390aa2d1ad34$var$STORAGE_KEYS","watched","queue","$865c390aa2d1ad34$var$LOCAL_MOVIES_RULES","$865c390aa2d1ad34$var$reDrawLocalMovies","rules","pgNum","movies","JSON","parse","localMovies","page","total_pages","total_results","results","slice","stringify","$azRuP","drawGallery","$cbBJp","drawPagination","$865c390aa2d1ad34$var$onPgNumClk","$865c390aa2d1ad34$var$onGalleryClk","innerHTML","window","scrollTo","$865c390aa2d1ad34$var$onBtnClk","e","removeEventListener","target","id","closest","movieNumberEl","console","log","dataset","movie","insertAdjacentHTML","$yVC87","addModalMcp","btnToWatched","btnToQueue","$865c390aa2d1ad34$var$btnStyle","$865c390aa2d1ad34$var$addMovieToStorage","targetPageNum","currentPageNum","totalPages","newPageNum","$8hUJb","calcNewPgNum","storageKey","movieId","btn","$865c390aa2d1ad34$var$isMovieInStorage","storageMovies","storageMovie","find","movieLS","movieIndex","indexOf","splice","textContent","push","Math","ceil"],"version":3,"file":"my-library.94d6b807.js.map"}