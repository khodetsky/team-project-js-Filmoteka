!function(){const e=document.querySelector("body"),t=document.querySelector(".theme__btn--light"),n=document.querySelector(".theme__btn--dark"),a=document.querySelector("footer"),r=(document.querySelector(".modal"),document.querySelector(".footer-modal")),o=document.querySelector(".footer-modal__text");t.addEventListener("click",(function(){n.style.display="block",t.style.display="none",e.classList.remove("dark"),a.classList.remove("dark"),r.style.backgroundColor="white",o.style.color="#545454",c=localStorage.setItem("currentTheme","light")})),n.addEventListener("click",s);let c="";function s(){t.style.display="block",n.style.display="none",e.classList.add("dark"),a.classList.add("dark"),r.style.backgroundColor="#333",o.style.color="white",c=localStorage.setItem("currentTheme","dark")}"dark"===localStorage.getItem("currentTheme")&&s();function l(e,t){e.innerHTML=function(e){return e.map(((e,t)=>function({poster_path:e,genre_ids:t,title:n,release_date:a,vote_average:r},o){const c="https://upload.wikimedia.org/wikipedia/commons/c/c2/No_image_poster.png",s=e?`https://image.tmdb.org/t/p/w500${e}`:c,l=(d=r,d<3?"card__rating-poor":d<5?"card__rating-low":d<7?"card__rating-medium":"card__rating-high");var d;return`\n    <li class="card" data-movie="${o}">\n        <a class="gallery__link">\n            <img class="card__img" src="${s}">\n            <p class="card__title">${n}</p>\n            <div class="card__text-container">\n                <p class="card__text">${function(e){const t=e.map(i);if(!t)return"";return t.length<=3?t.join(", "):[...t.slice(0,2),"other..."].join(", ")}(t)} | ${a?a.slice(0,4):""}</p>\n                <div class="card__rating-box ${l}" id="card-rating">\n                    <p class="card__rating-text">${r.toFixed(1)}</p>\n                </div>\n            </div>\n        </a>\n    </li>`}(e,t))).join("")}(t)}function i(e){return JSON.parse(localStorage.getItem("genres")).find((t=>t.id===e)).name}function d(e,t,n){const a=`\n            <button type="button" class="num-btn mobile-hiding" data-page="first">1</button>\n            <span class="num-btn mobile-hiding" data-page="${t}">...</span>    \n            ${function(e,t){let n=1,a=t,r="";t>5&&(e<3?a=5:e>t-3?(n=t-5+1,a=t):(n=e-2,a=e+2));for(let t=n;t<=a;t++)r+=`\n        <span\n            class="${t!==e?"num-btn":"pg-btn pg-btn--cur"}"\n            data-page="${t}">${t}</span>\n        `;return r}(t,n)}\n            <span class="num-btn mobile-hiding" data-page="${t}">...</span>    \n            <button type="button" class="num-btn mobile-hiding" data-page="last">${n}</button>\n        `;e.innerHTML=a}function u(e,t,n){switch(t){case"first":return 1;case"last":return n;case"prev":return 1===e?1:e-1;case"next":return e===n?n:e+1;default:return+t}}const g=document.querySelector("#queue"),m=document.querySelector("#watched"),p=document.querySelector(".header__buttons"),_=document.querySelector(".gallery"),b=document.querySelector("#pagination"),y=document.querySelector("#page-numbers"),h="localMovies",f={watched:"watchedAll",queue:"queueAll"},v="watched",S="queue";function k(e,t){const n=JSON.parse(localStorage.getItem(f[e]));if(n){const a={page:t,total_pages:n.total_pages,total_results:n.total_results,results:n.results.slice(20*(t-1),20*t),rules:e};localStorage.setItem(h,JSON.stringify(a)),l(_,a.results),d(y,t,a.total_pages),b.addEventListener("click",w),_.addEventListener("click",q)}else _.innerHTML="<h1>EMPTY gallery</h1>",y.innerHTML="";window.scrollTo(0,0),p.addEventListener("click",L)}function L(e){p.removeEventListener("click",L),"watched"===e.target.id?(m.classList.add("btn--is-active"),g.classList.remove("btn--is-active"),k(v,1)):(m.classList.remove("btn--is-active"),g.classList.add("btn--is-active"),k(S,1))}function q(e){const t=e.target.closest(".gallery__item");console.log(`%c${t.dataset.movie}`,"color: yellow; background-color: red; display: inline-block; padding: 5px; font-weight: bold;")}function w(e){if(!e.target.closest("[data-page]"))return;y.removeEventListener("click",w);const t=e.target.closest("[data-page]").dataset.page,n=JSON.parse(localStorage.getItem(h)),a=u(n.page,t,n.total_pages);k(n.rules,a)}k(v,1)}();
//# sourceMappingURL=my-library.693af90b.js.map
