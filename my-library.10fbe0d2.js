!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},a=e.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in o){var a=o[e];delete o[e];var l={id:e,exports:{}};return t[e]=l,a.call(l.exports,l,l.exports),l.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){o[e]=t},e.parcelRequired7c6=a);const l=document.querySelector("body"),s=document.querySelector(".theme__btn--light"),r=document.querySelector(".theme__btn--dark"),n=document.querySelector("footer"),c=document.querySelector(".modal"),d=document.querySelector(".footer-modal"),i=document.querySelector(".footer-modal__text");s.addEventListener("click",(function(){r.style.display="block",s.style.display="none",l.classList.remove("dark"),n.classList.remove("dark"),d.style.backgroundColor="white",i.style.color="#545454",c.classList.remove("dark"),u=localStorage.setItem("currentTheme","light")})),r.addEventListener("click",g);let u="";function g(){s.style.display="block",r.style.display="none",l.classList.add("dark"),n.classList.add("dark"),d.style.backgroundColor="#333",i.style.color="white",c.classList.add("dark"),u=localStorage.setItem("currentTheme","dark")}"dark"===localStorage.getItem("currentTheme")&&g(),a("9XfFT"),a("7Uufj"),a("1vR0Z"),a("7hKzD");var m=a("azRuP"),y=a("cbBJp"),p=a("8hUJb"),f=a("yVC87");const S=document.querySelector("#queue"),_=document.querySelector("#watched"),v=document.querySelector(".header__buttons"),h=document.querySelector(".gallery"),L=document.querySelector("#pagination"),b=document.querySelector("#page-numbers"),k=document.querySelector(".modal__data--content"),q="localMovies",w={watched:"watchedAll",queue:"queueAll"},O="watched",T="queue";function N(e,t){const o=JSON.parse(localStorage.getItem(w[e]));if(o&&o.total_results){const a={page:t,total_pages:o.total_pages,total_results:o.total_results,results:o.results.slice(20*(t-1),20*t),rules:e};localStorage.setItem(q,JSON.stringify(a)),(0,m.drawGallery)(h,a.results),(0,y.drawPagination)(b,t,a.total_pages),L.addEventListener("click",J),h.addEventListener("click",I)}else L.classList.add("is-hidden"),h.innerHTML='<h1>Your Library is <span style="color: #FF001B;">empty</span>. Please <span style="color: #FF001B;">add</span> a movie from the home page</h1>',b.innerHTML="";window.scrollTo(0,0),v.addEventListener("click",E)}function E(e){v.removeEventListener("click",E),"watched"===e.target.id?(_.classList.add("btn--is-active"),S.classList.remove("btn--is-active"),N(O,1)):(_.classList.remove("btn--is-active"),S.classList.add("btn--is-active"),N(T,1))}function I(e){if(e.target.closest(".card")){const t=e.target.closest(".card");console.log(`%c${t.dataset.movie}`,"color: yellow; background-color: red; display: inline-block; padding: 5px; font-weight: bold;");const o=JSON.parse(localStorage.getItem(q)).results[t.dataset.movie];k.insertAdjacentHTML("afterbegin",(0,f.addModalMcp)(o));const a=document.querySelector("#addToWatched"),l=document.querySelector("#addToQueue");C("watched",o,o.id,a),C("queue",o,o.id,l),a.addEventListener("click",(()=>{x("watched",o,o.id,a)})),l.addEventListener("click",(()=>{x("queue",o,o.id,l)}))}}function J(e){if(!e.target.closest("[data-page]"))return;b.removeEventListener("click",J);const t=e.target.closest("[data-page]").dataset.page,o=JSON.parse(localStorage.getItem(q)),a=o.page,l=o.total_pages,s=(0,p.calcNewPgNum)(a,t,l);N(o.rules,s)}function x(e,t,o,a){if(console.log("addMovieToStorage started... storageKey: ",e,"movie: ",t),console.log("STORAGE_KEYS[storageKey]: ",w[e]),M(e,t.id)){let t=JSON.parse(localStorage.getItem(w[e])),l=t.results.find((e=>e.id===o)),s=t.results.indexOf(l);t.results.splice(s,1),t.total_results-=1,t.total_pages=Math.ceil(t.total_results/20),localStorage.setItem(w[e],JSON.stringify(t)),a.classList.remove("btn__standart--orange"),a.textContent=`add to ${e}`,localStorage.setItem(q,JSON.stringify(t)),(0,m.drawGallery)(h,t.results)}else{let o=JSON.parse(localStorage.getItem(w[e]));o||(o={results:[],total_results:0,total_pages:0}),o.results.push(t),o.total_results+=1,o.total_pages=Math.ceil(o.total_results/20),localStorage.setItem(w[e],JSON.stringify(o)),a.classList.add("btn__standart--orange"),a.textContent=`delete from ${e}`}}function M(e,t){const o=JSON.parse(localStorage.getItem(w[e]));return!!o&&!!o.results.find((e=>e.id===t))}function C(e,t,o,a){M(e,t.id)&&(a.classList.add("btn__standart--orange"),a.textContent=`delete from ${e}`)}N(O,1)}();
//# sourceMappingURL=my-library.10fbe0d2.js.map
