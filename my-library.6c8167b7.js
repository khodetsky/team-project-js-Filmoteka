!function(){function e(e,n){e.innerHTML=function(e){return e.map(((e,n)=>function({poster_path:e,genre_ids:n,title:a,release_date:s,vote_average:l},r){return`\n    <li class="gallery__item" data-movie="${r}">\n        <a class="gallery__link">\n            <div class="img__wrap">\n                <img class="gallery__img" src="https://image.tmdb.org/t/p/w500${e}">\n            </div>\n            <p class="gallery__info">\n                <span class="gallery__info--title">${a}</span>\n                <span class="galery__info--text">${function(e){const n=e.map(t);if(!n)return"";return n.length<=3?n.join(", "):[...n.slice(0,2),"other..."].join(", ")}(n)} | ${s?s.slice(0,4):""}</span>\n                <span class="gallery__info--vote">${l.toFixed(1)}</span>\n            </p>\n        </a>\n    </li>\n    `}(e,n))).join("")}(n)}function t(e){return JSON.parse(localStorage.getItem("genres")).find((t=>t.id===e)).name}function n(e,t,n){const a=`\n            <button type="button" class="num-btn mobile-hiding" data-page="first">1</button>\n            <span class="num-btn mobile-hiding" data-page="${t}">...</span>    \n            ${function(e,t){let n=1,a=t,s="";t>5&&(e<3?a=5:e>t-3?(n=t-5+1,a=t):(n=e-2,a=e+2));for(let t=n;t<=a;t++)s+=`\n        <span\n            class="${t!==e?"num-btn":"pg-btn pg-btn--cur"}"\n            data-page="${t}">${t}</span>\n        `;return s}(t,n)}\n            <span class="num-btn mobile-hiding" data-page="${t}">...</span>    \n            <button type="button" class="num-btn mobile-hiding" data-page="last">${n}</button>\n        `;e.innerHTML=a}function a(e,t,n){switch(t){case"first":return 1;case"last":return n;case"prev":return 1===e?1:e-1;case"next":return e===n?n:e+1;default:return+t}}const s=document.querySelector("#queue"),l=document.querySelector("#watched"),r=document.querySelector(".header__buttons"),i=document.querySelector(".gallery"),o=document.querySelector("#pagination"),c=document.querySelector("#page-numbers"),u="localMovies",g={watched:"watchedAll",queue:"queueAll"},d="watched",p="queue";function m(t,a){const s=JSON.parse(localStorage.getItem(g[t]));if(s){const l={page:a,total_pages:s.total_pages,total_results:s.total_results,results:s.results.slice(20*(a-1),20*a),rules:t};localStorage.setItem(u,JSON.stringify(l)),e(i,l.results),n(c,a,l.total_pages),o.addEventListener("click",f),i.addEventListener("click",b)}else i.innerHTML="<h1>EMPTY gallery</h1>",c.innerHTML="";window.scrollTo(0,0),r.addEventListener("click",_)}function _(e){r.removeEventListener("click",_),"watched"===e.target.id?(l.classList.add("btn--is-active"),s.classList.remove("btn--is-active"),m(d,1)):(l.classList.remove("btn--is-active"),s.classList.add("btn--is-active"),m(p,1))}function b(e){const t=e.target.closest(".gallery__item");console.log(`%c${t.dataset.movie}`,"color: yellow; background-color: red; display: inline-block; padding: 5px; font-weight: bold;")}function f(e){if(!e.target.closest("[data-page]"))return;c.removeEventListener("click",f);const t=e.target.closest("[data-page]").dataset.page,n=JSON.parse(localStorage.getItem(u)),s=a(n.page,t,n.total_pages);m(n.rules,s)}m(d,1)}();
//# sourceMappingURL=my-library.6c8167b7.js.map
