{"mappings":"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","sources":["src/js/changeThemeLibrary.js","src/my-library.js"],"sourcesContent":["const body = document.querySelector('body');\nconst btnLightTheme = document.querySelector('.theme__btn--light');\nconst btnDarkTheme = document.querySelector('.theme__btn--dark');\nconst footer = document.querySelector('footer');\nconst modal = document.querySelector('.modal');\nconst modalFooter = document.querySelector('.footer-modal');\nconst footerModalText = document.querySelector('.footer-modal__text');\n\n\n\n\n\nbtnLightTheme.addEventListener('click', setLightTheme);\nbtnDarkTheme.addEventListener('click', setDarkTheme);\n\nlet currentTheme = '';\n\nif (localStorage.getItem('currentTheme') === 'dark') {\n   setDarkTheme();\n}\n\nfunction setLightTheme() {\n   btnDarkTheme.style.display = \"block\";\n   btnLightTheme.style.display = \"none\";\n   body.classList.remove('dark');\n   footer.classList.remove('dark');\n   modalFooter.style.backgroundColor = \"white\";\n   footerModalText.style.color = \"#545454\";\n   modal.classList.remove('dark');\n   currentTheme = localStorage.setItem('currentTheme', 'light');\n}\n\nfunction setDarkTheme() {\n   btnLightTheme.style.display = \"block\";\n   btnDarkTheme.style.display = \"none\";\n   body.classList.add('dark');\n   footer.classList.add('dark');\n   modalFooter.style.backgroundColor = \"#333\";\n   footerModalText.style.color = \"white\";\n   modal.classList.add('dark');\n   currentTheme = localStorage.setItem('currentTheme', 'dark');\n}\n","import './js/changeThemeLibrary';\n// Основний файл сторінки My library. Сюди будуть імпортуватися окремі функції з ./js/my-library\n// Додавайте ці окремі файли саме у ту папку і експортуйте сюди.\nimport './js/index/signInBtn';\nimport './js/modal-close';\nimport './js/modal-open';\nimport './js/footer';\n\nimport { drawGallery } from './js/drawGallery';\nimport { drawPagination } from './js/drawPagination';\nimport { calcNewPgNum } from './js/calcNewPgNum';\nimport { addModalMcp } from './js/modalMarkup';\n\nconst queueBtnRef = document.querySelector('#queue');\nconst watchedBtnRef = document.querySelector('#watched');\nconst buttonsRef = document.querySelector('.header__buttons');\nconst galleryRef = document.querySelector('.gallery');\nconst paginationRef = document.querySelector('#pagination');\nconst pageNumRef = document.querySelector('#page-numbers');\nconst modalMcpContainer = document.querySelector('.modal__data--content');\n\nconst MOVIES_PER_PAGE = 20;\nconst LOCAL_MOVIES_KEY = 'localMovies';\n//\nconst STORAGE_KEYS = {\n  watched: 'watchedAll',\n  queue: 'queueAll',\n};\n//\nconst LOCAL_MOVIES_RULES = {\n  watched: 'watched',\n  queue: 'queue',\n};\n//\n\n/* Rendering Initial Values*/\nreDrawLocalMovies(LOCAL_MOVIES_RULES.watched, 1);\n\n/*\n * ===================\n */\n\n/* MAIN Content Rendering Function */\nfunction reDrawLocalMovies(rules, pgNum) {\n  // Get movies Full List from needed Local Storage\n  const movies = JSON.parse(localStorage.getItem(STORAGE_KEYS[rules]));\n\n  if (!movies || !movies.total_results) {\n    paginationRef.classList.add('is-hidden');\n    drawEmptyGallery();\n    \n  } else {\n    const localMovies = {\n      page: pgNum,\n      total_pages: movies.total_pages,\n      total_results: movies.total_results,\n      results: movies.results.slice(\n        MOVIES_PER_PAGE * (pgNum - 1),\n        MOVIES_PER_PAGE * pgNum\n      ),\n      rules,\n    };\n\n    localStorage.setItem(LOCAL_MOVIES_KEY, JSON.stringify(localMovies));\n\n    drawGallery(galleryRef, localMovies.results);\n    drawPagination(pageNumRef, pgNum, localMovies.total_pages);\n\n    paginationRef.addEventListener('click', onPgNumClk);\n    galleryRef.addEventListener('click', onGalleryClk);\n  }\n\n  window.scrollTo(0, 0);\n  buttonsRef.addEventListener('click', onBtnClk);\n}\n\nfunction drawEmptyGallery() {\n\n  galleryRef.innerHTML = '<h1>Your Library is <span style=\"color: #FF001B;\">empty</span>. Please <span style=\"color: #FF001B;\">add</span> a movie from the home page</h1>';\n\n  pageNumRef.innerHTML = '';\n}\n\nfunction onBtnClk(e) {\n  buttonsRef.removeEventListener('click', onBtnClk);\n\n  if (e.target.id === 'watched') {\n    watchedBtnRef.classList.add('btn--is-active');\n    queueBtnRef.classList.remove('btn--is-active');\n\n    reDrawLocalMovies(LOCAL_MOVIES_RULES.watched, 1);\n  } else {\n    watchedBtnRef.classList.remove('btn--is-active');\n    queueBtnRef.classList.add('btn--is-active');\n\n    reDrawLocalMovies(LOCAL_MOVIES_RULES.queue, 1);\n  }\n}\n\nfunction onGalleryClk(e) {\n  if (e.target.closest('.card')) {\n    const movieNumberEl = e.target.closest('.card');\n    // console.log(e.target);\n    // console.log(movieNumberEl);\n    console.log(\n      `%c${movieNumberEl.dataset.movie}`,\n      'color: yellow; background-color: red; display: inline-block; padding: 5px; font-weight: bold;'\n    );\n\n    const movie = JSON.parse(localStorage.getItem(LOCAL_MOVIES_KEY)).results[\n      movieNumberEl.dataset.movie\n    ];\n    modalMcpContainer.insertAdjacentHTML('afterbegin', addModalMcp(movie));\n\n    const btnToWatched = document.querySelector('#addToWatched');\n    const btnToQueue = document.querySelector('#addToQueue');\n\n    btnStyle('watched', movie, movie.id, btnToWatched);\n    btnStyle('queue', movie, movie.id, btnToQueue);\n\n    btnToWatched.addEventListener('click', () => {\n      addMovieToStorage('watched', movie, movie.id, btnToWatched);\n    });\n    btnToQueue.addEventListener('click', () => {\n      addMovieToStorage('queue', movie, movie.id, btnToQueue);\n    });\n  }\n}\n\nfunction onPgNumClk(e) {\n  if (!e.target.closest('[data-page]')) {\n    return;\n  }\n\n  pageNumRef.removeEventListener('click', onPgNumClk);\n\n  const targetPageNum = e.target.closest('[data-page]').dataset.page;\n\n  // if (!targetPageNum) {\n  //     return;\n  // }\n\n  const localMovies = JSON.parse(localStorage.getItem(LOCAL_MOVIES_KEY));\n\n  const currentPageNum = localMovies.page;\n  const totalPages = localMovies.total_pages;\n\n  const newPageNum = calcNewPgNum(currentPageNum, targetPageNum, totalPages);\n\n  reDrawLocalMovies(localMovies.rules, newPageNum);\n}\n\nfunction addMovieToStorage(storageKey, movie, movieId, btn) {\n  console.log(\n    'addMovieToStorage started... storageKey: ',\n    storageKey,\n    'movie: ',\n    movie\n  );\n  console.log('STORAGE_KEYS[storageKey]: ', STORAGE_KEYS[storageKey]);\n\n  if (!isMovieInStorage(storageKey, movie.id)) {\n    let storageMovies = JSON.parse(\n      localStorage.getItem(STORAGE_KEYS[storageKey])\n    );\n    if (!storageMovies) {\n      storageMovies = {\n        results: [],\n        total_results: 0,\n        total_pages: 0,\n      };\n    }\n\n    storageMovies.results.push(movie);\n    storageMovies.total_results += 1;\n    storageMovies.total_pages = Math.ceil(\n      storageMovies.total_results / MOVIES_PER_PAGE\n    );\n\n    localStorage.setItem(\n      STORAGE_KEYS[storageKey],\n      JSON.stringify(storageMovies)\n    );\n    btn.classList.add('btn__standart--orange');\n    btn.textContent = `delete from ${storageKey}`;\n  } else {\n    let storageMovies = JSON.parse(\n      localStorage.getItem(STORAGE_KEYS[storageKey])\n    );\n    let storageMovie = storageMovies.results.find(\n      movieLS => movieLS.id === movieId\n    );\n    let movieIndex = storageMovies.results.indexOf(storageMovie);\n    storageMovies.results.splice(movieIndex, 1);\n\n    storageMovies.total_results -= 1;\n    storageMovies.total_pages = Math.ceil(\n      storageMovies.total_results / MOVIES_PER_PAGE\n    );\n\n    localStorage.setItem(\n      STORAGE_KEYS[storageKey],\n      JSON.stringify(storageMovies)\n    );\n\n    btn.classList.remove('btn__standart--orange');\n    btn.textContent = `add to ${storageKey}`;\n\n    localStorage.setItem(LOCAL_MOVIES_KEY, JSON.stringify(storageMovies));\n    drawGallery(galleryRef, storageMovies.results);\n\n  }\n}\n\nfunction isMovieInStorage(storageKey, movieId) {\n  const storageMovies = JSON.parse(\n    localStorage.getItem(STORAGE_KEYS[storageKey])\n  );\n  if (!storageMovies) return false;\n\n  return storageMovies.results.find(movie => movie.id === movieId)\n    ? true\n    : false;\n}\n\nfunction btnStyle(storageKey, movie, movieId, btn) {\n  if (isMovieInStorage(storageKey, movie.id)) {\n    btn.classList.add('btn__standart--orange');\n    btn.textContent = `delete from ${storageKey}`;\n  }\n}\n\n// GET TRENDING\n// const MEDIA_TYPE = 'movie';\n// const TIME_WINDOW = 'day'; // day | week\n// https://api.themoviedb.org/3/trending/{MEDIA_TYPE}/{TIME_WINDOW}?api_key=<<api_key>>\n//\n\n// GET SEARCH QUERY\n//\n// https://api.themoviedb.org/3/search/movie?api_key=b282a22ae665f5f17a32a077013d243c&query=cat&page=1&include_adult=false\n"],"names":["$d9a27e7a4162e78b$var$body","document","querySelector","$d9a27e7a4162e78b$var$btnLightTheme","$d9a27e7a4162e78b$var$btnDarkTheme","$d9a27e7a4162e78b$var$footer","$d9a27e7a4162e78b$var$modal","$d9a27e7a4162e78b$var$modalFooter","$d9a27e7a4162e78b$var$footerModalText","addEventListener","style","display","classList","remove","backgroundColor","color","$d9a27e7a4162e78b$var$currentTheme","localStorage","setItem","$d9a27e7a4162e78b$var$setDarkTheme","add","getItem","$fc8e7c71b3b7ed96$var$queueBtnRef","$fc8e7c71b3b7ed96$var$watchedBtnRef","$fc8e7c71b3b7ed96$var$buttonsRef","$fc8e7c71b3b7ed96$var$galleryRef","$fc8e7c71b3b7ed96$var$paginationRef","$fc8e7c71b3b7ed96$var$pageNumRef","$fc8e7c71b3b7ed96$var$modalMcpContainer","$fc8e7c71b3b7ed96$var$STORAGE_KEYS","watched","queue","$fc8e7c71b3b7ed96$var$LOCAL_MOVIES_RULES","$fc8e7c71b3b7ed96$var$reDrawLocalMovies","rules","pgNum","movies","JSON","parse","total_results","localMovies","page","total_pages","results","slice","stringify","$lHYXG","drawGallery","$bMgEY","drawPagination","$fc8e7c71b3b7ed96$var$onPgNumClk","$fc8e7c71b3b7ed96$var$onGalleryClk","innerHTML","window","scrollTo","$fc8e7c71b3b7ed96$var$onBtnClk","e","removeEventListener","target","id","closest","movieNumberEl","console","log","dataset","movie","insertAdjacentHTML","$gJGFz","addModalMcp","btnToWatched","btnToQueue","$fc8e7c71b3b7ed96$var$btnStyle","$fc8e7c71b3b7ed96$var$addMovieToStorage","targetPageNum","currentPageNum","totalPages","newPageNum","$3cIwM","calcNewPgNum","storageKey","movieId","btn","$fc8e7c71b3b7ed96$var$isMovieInStorage","storageMovies","storageMovie","find","movieLS","movieIndex","indexOf","splice","Math","ceil","textContent","push"],"version":3,"file":"my-library.432adbfd.js.map"}